#!/bin/bash

editor="cursor"

# If no arguments, edit the git repo root or current directory
if [ $# -eq 0 ]; then
  git_dir=$(findup .git)
  if [ ! -z "$git_dir" ]; then
    dir=$(dirname "$git_dir")
  else
    dir="."
  fi
  echo $editor "$dir"
  $editor "$dir"

else
  # Process each argument
  sources=()
  for arg in "$@"; do
    if [ -r "$arg" ]; then
      path="$arg"
    else
      path=$(find-source "$arg")
    fi
    sources+=("$path")
  done

  echo $editor "${sources[@]}"
  $editor "${sources[@]}"
fi
