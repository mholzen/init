arg="${@:-$HOME/images/wallpapers/}"

if [ -f "$arg" ]; then
  file="$arg"
elif [ -d "$arg" ]; then

  file=$(cd $arg; random-file duration:1000 "$arg")
fi

file=$(realpath "$file")

osascript -e '
tell application "Finder"
  set desktop picture to POSIX file "'"$file"'"
end tell
'
