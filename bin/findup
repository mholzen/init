#!/bin/sh

file="$1"
if [ -z "$file" ]; then
    echo "no file to find" >&2
    exit 1
fi

# Starting directory
if [ "$2" ]; then
    start_dir=`(builtin cd "$2"; pwd)`
else
    start_dir=`pwd`
fi

dir=$start_dir

while true; do
    if [ -e "$dir/$file" ]; then
	    echo "$dir/$file"
	    exit 0
    fi

    if [ -z "$dir" ]; then
	    echo "cannot find '$file' in paths from '$start_dir' to root" >&2
	    exit 1
    fi

    dir=${dir%/*}
done
