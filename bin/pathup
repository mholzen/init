#!/bin/sh

component="$1"
if [ -z "$component" ]; then
    echo "usage: pathup <component> [start_dir]" >&2
    exit 1
fi

if [ -n "$2" ]; then
    dir="$2"
else
    dir=$(realpath "$(pwd)")
fi
start_dir="$dir"
while [ -n "$dir" ]; do
    if [ "${dir##*/}" = "$component" ]; then
        echo "$dir"
        exit 0
    fi
    dir=${dir%/*}
done

echo "cannot find component '$component' in path '$start_dir'" >&2
exit 1
