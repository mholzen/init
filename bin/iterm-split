#!/bin/bash

cmd="$1"

script="
tell application \"iTerm2\"
    tell current session of current window
        set newSession to split vertically with default profile
        if \"'$cmd'\" is not equal to \"\" then
            tell newSession
                write text \"$cmd\"
            end tell
        end if
    end tell
end tell
"

osascript -e "$script"